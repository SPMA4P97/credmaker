<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Credential Generator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <style>
    body {
      font-family: serif;
      padding: 20px;
      background: #f4f4f4;
    }

    .form-section {
      margin-bottom: 30px;
      max-width: 600px;
    }

    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }

    input, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
    }

    button {
      margin-top: 20px;
      padding: 10px 20px;
    }

    #certificate {
      width: 800px;
      height: 600px;
      background: white;
      border: 2px solid #000;
      margin-top: 40px;
      text-align: center;
      padding: 60px 40px;
      margin-bottom: 40px;
    }

    #certificate h1 {
      font-size: 30px;
      margin-bottom: 20px;
      text-transform: uppercase;
    }

    #certificate .line {
      margin: 12px 0;
      font-size: 18px;
    }

    #certificate .custom-description {
      margin-top: 30px;
      font-size: 16px;
      font-style: italic;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>

  <h2>Credential Generator</h2>

  <div class="form-section">
    <label>Issuing Organization:</label>
    <input type="text" id="orgInput" placeholder="e.g., Journal of Modern Ideas" oninput="updateCertificate()"/>

    <label>Recipient Name:</label>
    <input type="text" id="nameInput" placeholder="e.g., Jane Doe" oninput="updateCertificate()"/>

    <label>Role:</label>
    <input type="text" id="roleInput" placeholder="e.g., Editorial Assistant" oninput="updateCertificate()"/>

    <label>Issue Date:</label>
    <input type="text" id="dateInput" placeholder="e.g., July 5, 2025" oninput="updateCertificate()"/>

    <label>Volume(s) <small>(optional)</small>:</label>
    <input type="text" id="volumeInput" placeholder="e.g., Vol. 10 & 11" oninput="updateCertificate()"/>

    <label>Description:</label>
    <textarea rows="4" id="descInput" placeholder="Custom message or citation text..." oninput="updateCertificate()"></textarea>

    <button onclick="downloadCertificate()">Download as PDF</button>
  </div>

  <div id="certificate">
    <h1 id="certOrg">[Issuing Organization]</h1>
    <div class="line">This certifies that</div>
    <div class="line" style="font-size: 24px; font-weight: bold;" id="certName">[Recipient Name]</div>
    <div class="line">has served as</div>
    <div class="line" id="certRole">[Role]</div>
    <div class="line" id="certVolume" style="display: none;"></div>
    <div class="line">on <span id="certDate">[Issue Date]</span></div>
    <div class="custom-description" id="certDesc"></div>
  </div>

  <script>
    function updateCertificate() {
      const org = document.getElementById('orgInput').value || '[Issuing Organization]';
      const name = document.getElementById('nameInput').value || '[Recipient Name]';
      const role = document.getElementById('roleInput').value || '[Role]';
      const date = document.getElementById('dateInput').value || '[Issue Date]';
      const volume = document.getElementById('volumeInput').value.trim();
      const desc = document.getElementById('descInput').value;

      document.getElementById('certOrg').innerText = org;
      document.getElementById('certName').innerText = name;
      document.getElementById('certRole').innerText = role;
      document.getElementById('certDate').innerText = date;
      document.getElementById('certDesc').innerText = desc;

      const volEl = document.getElementById('certVolume');
      if (volume) {
        volEl.style.display = 'block';
        volEl.innerText = `for Volume(s): ${volume}`;
      } else {
        volEl.style.display = 'none';
        volEl.innerText = '';
      }
    }

    async function downloadCertificate() {
      const cert = document.getElementById('certificate');
      const canvas = await html2canvas(cert);
      const imgData = canvas.toDataURL('image/png');
      const { jsPDF } = window.jspdf;
      const pdf = new jsPDF('landscape', 'pt', [cert.offsetWidth, cert.offsetHeight]);
      pdf.addImage(imgData, 'PNG', 0, 0, cert.offsetWidth, cert.offsetHeight);
      pdf.save('credential.pdf');
    }

    // Initialize preview
    updateCertificate();
  </script>

</body>
</html>
